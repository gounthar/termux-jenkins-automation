---
# Updatecli manifest to track Jenkins plugins from jenkins-docs quickstart tutorials
#
# This manifest monitors the official jenkins-docs/quickstart-tutorials repository
# and automatically updates our plugins.txt when the upstream file changes.
#
# Reference: https://github.com/jenkins-docs/quickstart-tutorials/blob/main/dockerfiles/plugins.txt

name: "Track Jenkins Plugins from jenkins-docs"

scms:
  default:
    kind: github
    spec:
      user: "{{ .github.user }}"
      email: "{{ .github.email }}"
      owner: "{{ .github.owner }}"
      repository: "{{ .github.repository }}"
      token: "{{ requiredEnv .github.token }}"
      username: "{{ .github.username }}"
      branch: "{{ .github.branch }}"

sources:
  pluginsTxt:
    name: "Jenkins plugins list from jenkins-docs"
    kind: file
    spec:
      file: https://raw.githubusercontent.com/jenkins-docs/quickstart-tutorials/main/dockerfiles/plugins.txt
    transformers:
      - trimprefix: " "
      - trimsuffix: " "

targets:
  localPlugins:
    name: "Update local plugins.txt"
    kind: file
    scmid: default
    sourceid: pluginsTxt
    spec:
      file: jcasc/plugins.txt
      forcecreate: false
    transformers:
      - trimprefix: " "
      - trimsuffix: " "

actions:
  default:
    kind: github/pullrequest
    scmid: default
    title: "chore(deps): update Jenkins plugins from jenkins-docs"
    spec:
      labels:
        - dependencies
        - automation
      description: |
        ## Automated Plugin Update

        This PR updates `jcasc/plugins.txt` to match the official Jenkins plugins list from [jenkins-docs/quickstart-tutorials](https://github.com/jenkins-docs/quickstart-tutorials/blob/main/dockerfiles/plugins.txt).

        ### Verification Steps
        1. Review the plugin changes
        2. Check for any breaking changes in plugin changelogs
        3. Test with: `ansible-playbook ansible/playbooks/04-configure-jcasc.yaml --check`
        4. After merge, plugins will be installed on next Jenkins restart

        ---
        ðŸ¤– Auto-generated by [Updatecli](https://www.updatecli.io/)
